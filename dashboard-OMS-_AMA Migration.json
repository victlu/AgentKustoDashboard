{"$schema":"https://dataexplorer.azure.com/static/d/schema/30/dashboard.json","id":"be8d15c9-62c6-4748-acf0-e86e50a31e42","eTag":"JEGn0/f6dMH8K7EQy3Fv0g==","schema_version":"30","title":"OMS->AMA Migration","autoRefresh":{"enabled":false},"sharedQueries":[],"tiles":[{"id":"53d69afd-c72e-4baa-8709-fcd439d749e6","title":"MMA & AMA Windows Population Trend","visualType":"line","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":0,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Windows Population Trend MMA & AMA\nlet MMA_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| summarize MMA_weekByWeek_Count = sum(Population) by Date\n| summarize MMA_MonthlyAvg = round(avg(MMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nlet AMA_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n| where TblVer == 2\n| summarize AMA_weekByWeek_Count = sum(Population) by Date\n| summarize AMA_MonthlyAvg = round(avg(AMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nMMA_pop\n| join AMA_pop on Date | project-away Date1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"27f2ffac-53d5-47cd-a84d-399729b15a78","title":"OMS & AMA Linux Population Trend","visualType":"line","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":12,"y":0,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Linux Population Trend AMA & OMS\nlet MMA_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot\n| where TblVer == 3\n| summarize MMA_weekByWeek_Count = sum(Population) by Date\n| summarize MMA_snap_MonthlyAvg = round(avg(MMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nlet AMA_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| summarize AMA_weekByWeek_Count = sum(Population) by Date\n| summarize AMA_snap_MonthlyAvg = round(avg(AMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nMMA_pop\n| join AMA_pop on Date | project-away Date1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"f9a7bd41-67df-4409-be5d-95b597cf2de3","title":"Top 2000 customers of OMS/MMA by avg daily agent count","visualType":"table","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":9,"width":24,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Top customers OMS/MMA by AgentId Count\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| summarize CustomerPop = sum(Population) by Customer\n| top 2000 by CustomerPop"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}},{"id":"5ab8fe52-f316-4004-9abf-1b769a8baac4","title":"Top 2000 customers of AMA by avg daily agent count ","visualType":"table","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":23,"width":24,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//AMA top customers\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == Newest\n| summarize CustomerPop = sum(Population) by Customer\n| top 2000 by CustomerPop"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}},{"id":"9ef41e2d-1d67-45a9-a968-dc2545133309","title":"SubscriptionId Name","visualType":"card","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":0,"width":14,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"print ['CustomerSelect']\n"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"5cdb025e-e590-4997-9dbe-2dbe395089d7","title":"Agent population (AMA vs OMS/MMA) by subscription ID","visualType":"bar","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":3,"width":23,"height":6},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"//Agent population (AMA vs OMS/MMA) by subscription ID\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet Subscriptions_MMA_OMS_Agent_Pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == MMAOMS_Newest\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect'] // Freetext filtering\n| summarize total_MMAOMS_agents = sum(Population) by SubscriptionId\n;\nlet AMA_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nlet Subscriptions_AMA_Agent_Pop =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == AMA_Newest\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect'] // Freetext filtering\n| summarize total_AMA_agents = sum(Population) by SubscriptionId\n;\nSubscriptions_MMA_OMS_Agent_Pop\n| join kind=fullouter Subscriptions_AMA_Agent_Pop on SubscriptionId\n| project-away SubscriptionId1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[{"destinationPages":[],"disabled":false}]}},{"id":"9695c985-cc29-48e1-8a1c-1e706e3710d7","title":"Solution Group","visualType":"card","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":4,"y":0,"width":13,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect"],"text":"\nprint SolutionSelect"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"593df15e-e785-4e97-a220-27a9bf9d1be6","title":"Customer SubscriptionIds in MMA/OMS by Population","visualType":"table","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":3,"width":24,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Customer SubscriptionIds in MMA/OMS by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal, OsType, Solutions\n| sort by Population desc\n;\nMMAOMS_Daily"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"4f7a8544-fd41-4ec2-bf59-1149076ce777","property":"SubscriptionId"}],"destinationPages":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"],"disabled":false}]}},{"id":"fdc62a5e-6968-40ab-a196-7ce52aa62abc","title":"Customer SubscriptionIds in AMA by Population","visualType":"table","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":20,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"let Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n;\nAMA_Daily"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"4f7a8544-fd41-4ec2-bf59-1149076ce777","property":"SubscriptionId"}],"destinationPages":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"],"disabled":false}]}},{"id":"e465c667-754a-48bf-89d4-21ca3b3c3541","title":"Customer Name","visualType":"card","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":14,"y":0,"width":10,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"let p360_name =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect']\n| project Customer\n;\np360_name"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"396dbed3-1943-49bb-9a8a-619d82607bf6","title":"Total MMA/OMS Population of Customer","visualType":"card","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":0,"width":11,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Customer SubscriptionIds in MMA/OMS by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal, Solutions\n| sort by Population desc\n;\nMMAOMS_Daily\n| summarize Total_MMAOMS_Pop = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"b11d405c-ffb3-412a-8a42-a894e177d905","title":"Customer Name","visualType":"card","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":11,"y":0,"width":13,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"print CustomerNameSelect"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"7abcfb8d-fb0b-45af-9512-9a85a6929588","title":"Trend of MMA/OMS & AMA Population of Customer","visualType":"timechart","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":29,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Trend of MMA/OMS & AMA Population of Customer\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal, Solutions\n| sort by Population desc\n| summarize Customer_Total_MMA_OMS_Pop = sum(Population) by Date\n;\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n| summarize Customer_Total_AMA_Pop = sum(Population) by Date\n;\nMMAOMS_Daily\n| join kind=leftouter AMA_Daily on Date\n| project-away Date1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"aaa3723c-5702-478e-ae28-359a93fc8de2","title":"Total AMA Population of Customer","visualType":"card","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":17,"width":10,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Customer SubscriptionIds in AMA by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n;\nAMA_Daily\n| summarize Total_AMA_Pop = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"a7917a5d-6c67-40cf-9116-a730aa198924","title":"Solutions used on OMS/MMA by number of agents","visualType":"pie","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":9,"width":23,"height":12},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"//Solutions used on MMA/OMS by number of agents\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 1\n    | project Date\n    | top 1 by Date );\nlet Customer_MMAOMS_Solutions =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 1\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect'] // Freetext filtering\n| summarize SolutionPopulation = sum(Population) by GroupedSolution\n| sort by SolutionPopulation desc\n;\nCustomer_MMAOMS_Solutions"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"cbb1a6cd-a6ce-44f1-909e-23dc1f7e6dd8","property":"GroupedSolution"}],"destinationPages":["abdd00b4-5e83-497d-a2c3-661d5d37f13c"],"disabled":false}]}},{"id":"18c4f72e-671a-4b38-a6c1-31cb905a8ab1","title":"OMS/MMA Customers Population of agents using selected solution","visualType":"table","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":0,"y":3,"width":23,"height":12},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect"],"text":"//OMS/MMA Customers Population of agents using selected solution\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 1\n    | project Date\n    | top 1 by Date );\nlet Customers_MMAOMS_for_Solution =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 1\n| where isempty(['SolutionSelect']) or GroupedSolution has ['SolutionSelect']\n| summarize CustomerPopulation = sum(Population) by Customer\n| sort by CustomerPopulation desc\n;\nCustomers_MMAOMS_for_Solution"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":false,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}},{"id":"f96383e6-f83b-43db-bb20-e603d901a587","title":"OMS/MMA Subscription Populations of agents using selected solution","visualType":"table","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":0,"y":15,"width":23,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect"],"text":"//OMS/MMA Subscription Populations of agents using selected solution \nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 1\n    | project Date\n    | top 1 by Date );\nlet Customers_MMAOMS_for_Solution =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 1\n//| where GroupedSolution == \"Defender for Servers\"\n| where isempty(['SolutionSelect']) or GroupedSolution has ['SolutionSelect']\n| summarize Subscription_Population = sum(Population) by SubscriptionId, Customer\n| sort by Subscription_Population desc\n| project-reorder SubscriptionId, Subscription_Population, Customer\n;\nCustomers_MMAOMS_for_Solution"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":false,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"4f7a8544-fd41-4ec2-bf59-1149076ce777","property":"SubscriptionId"}],"destinationPages":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"],"disabled":false},{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}}],"parameters":[{"kind":"duration","id":"08864796-4b5e-423d-bbb8-c356a44daa75","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"selection","pageIds":[]}},{"kind":"string","selectionType":"freetext","id":"4f7a8544-fd41-4ec2-bf59-1149076ce777","displayName":"Customer(SubscriptionId)","variableName":"CustomerSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"]}},{"kind":"string","selectionType":"freetext","id":"cbb1a6cd-a6ce-44f1-909e-23dc1f7e6dd8","displayName":"Solution","variableName":"SolutionSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["abdd00b4-5e83-497d-a2c3-661d5d37f13c"]}},{"kind":"string","selectionType":"freetext","id":"900f1a93-cd36-46c2-97a9-17e7c20487ef","displayName":"CustomerName","variableName":"CustomerNameSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"]}}],"dataSources":[{"id":"1744db72-6d19-46bb-ae67-eb77c91db237","name":"GenevaAgentBI","clusterUri":"https://genevaagent.kusto.windows.net/","database":"BI","kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"OMS->AMA Migration","id":"c5d21b0d-c518-4c94-999c-daa022afb8c1"},{"id":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","name":"Customer View"},{"name":"Subscription View","id":"3bade44b-2e1b-4b7b-9970-4365c4d6c503"},{"name":"Solution View","id":"abdd00b4-5e83-497d-a2c3-661d5d37f13c"}]}