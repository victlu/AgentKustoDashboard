{"$schema":"https://dataexplorer.azure.com/static/d/schema/32/dashboard.json","id":"05a77002-4088-4991-a3a8-a8b37b4b915a","eTag":"w5Ey6HSuafIYX+tJ9SkynQ==","schema_version":"32","title":"AMA Agent Team","autoRefresh":{"enabled":false},"sharedQueries":[],"tiles":[{"id":"5eb58ad2-2bb4-42e0-8453-4c1fc25f6531","title":"Total AMA Current Pop Estimation","visualType":"card","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":0,"width":8,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"let AMApop =\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where StartTime > ago(62d)\n| summarize DailyCount = count() by StartTime\n| summarize MonthlyAvg = round(max(DailyCount),0)\n;\nAMApop"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"cb4401e2-a173-4bf6-a71c-1c1fcf1c3689","title":"Total Avg Daily Population Trend MoM","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":3,"width":24,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//AMA Population Trend Month over Month\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where StartTime > ago(365d)\n| summarize DailyCount = count(),\n            WinDailyCount = countif(OSVer has \"windows\"),\n            LnxDailyCount = countif(OSVer !has \"windows\")\n            by StartTime\n| summarize TotalMonthlyAvg = round(avg(DailyCount),0),\n            WinMonthlyAvg = round(avg(WinDailyCount),0),\n            LnxMonthlyAvg = round(avg(LnxDailyCount),0)\n            by bin(StartTime,startofmonth(StartTime))"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"3df7de73-50cf-4b5e-89be-eb2371732f5d","title":"Windows Top OS/distro Version Populations","visualType":"pie","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":13,"width":12,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Current pop by OS version\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where OSVer has \"windows\"\n| where StartTime > ago(31d)\n| summarize DailyCount = count() by StartTime, OSVer\n| summarize MonthlyAvg = round(max(DailyCount),0) by OSVer\n| where MonthlyAvg > 0\n| sort by MonthlyAvg\n| take 20"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"2b90d9fa-ab4a-4551-9650-260f1b37dc35","title":"Agent Version Windows Population","visualType":"pie","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":26,"width":12,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//AMA Version breakdown\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where OSVer has \"windows\"\n| where StartTime > ago(31d)\n| where AgentVer != \"00.00.00\"\n| extend MA_Ver = AgentVer\n| extend AMA_Ver = iff(AgentVer==\"45.09.01\",\"1.4.0.0\",\n                   iff(AgentVer==\"45.10.04\",\"1.5.0.0\",\n                   iff(AgentVer==\"45.11.01\",\"1.6.0.0\",\n                   iff(AgentVer==\"45.12.01\",\"1.7.0.0\",\n                   iff(AgentVer==\"45.13.01\",\"1.8.0.0\",\n                   iff(AgentVer==\"45.14.04\",\"1.9.0.0\",\n                   iff(AgentVer==\"46.01.00\",\"1.10.0.0\",\n                   \"?\"\n                   )))))))\n| extend Both_Version = iff(AMA_Ver!=\"?\",strcat(MA_Ver,\" (\",AMA_Ver,\")\"),MA_Ver)\n| summarize DailyCount = count() by StartTime, Both_Version\n| summarize MonthlyAvg = round(avg(DailyCount),0) by Both_Version\n| where MonthlyAvg > 0\n| sort by MonthlyAvg\n"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"27b8b44a-7a1c-4715-8e52-afbd2dd54545","title":"Windows Arc/Non-Arc Population","visualType":"pie","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":40,"width":12,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Windows Pop by Arc type\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily\n| where StartTime > ago(31d)\n| where OSVer has \"windows\"\n| extend ArcType = iif(ResourceId has \"/microsoft.HybridCompute/\", \"ARC\", \"NON-ARC\")\n| summarize DailyCount = count() by StartTime, ArcType\n| summarize MonthlyAvg = round(avg(DailyCount),0) by ArcType\n| where MonthlyAvg > 0\n| sort by MonthlyAvg\n"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"98ca4730-9de0-4d9c-bfe4-0bc89ebc0762","title":"Top 2000 customers of AMA & MMA/OMS by avg daily count","visualType":"table","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":50,"width":24,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('Telemetry').WinMMACustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"Telemetry\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"Telemetry\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == NewestMMA\n| summarize Total_MMA_OMS_Pop = sum(Population)//, \n            //Win_MMA_Pop = sumif(Population,OsType has \"windows\"),\n            //Lnx_MMA_Pop = sumif(Population,OsType !has \"windows\")\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('AMA').WinAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\nunion cluster('genevaagent.kusto.windows.net').database('AMA').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('AMA').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == NewestAMA\n| summarize Total_AMA_Pop = sum(Population) by Customer\n| top 2000 by Total_AMA_Pop\n;\nAMA_cust_pop\n| join kind=leftouter MMA_cust_pop on Customer\n| project-away Customer1\n| extend Total_MMA_OMS_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend AMA_MMA_percentage = round((Total_AMA_Pop/(Total_AMA_Pop + Total_MMA_OMS_Pop))*100,2)\n| sort by Total_AMA_Pop desc\n| project-reorder Customer, Total_AMA_Pop, Total_MMA_OMS_Pop, AMA_MMA_percentage"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}},{"id":"313706db-fee9-42b9-ab91-e0534016ccb3","title":"AMA Max Daily Success Trend - Weekly","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":77,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Max Daily Success Trend - Weekly\nunion cluster('genevaagent.kusto.windows.net').database('Telemetry').WinAMADailySnapshot,\n      cluster('genevaagent.kusto.windows.net').database('Telemetry').LnxAMADailySnapshot\n| where TblVer == 2\n| where Date > ago(63d)\n| summarize DailyEnablePassCount = dcountif(ResourceId,OpType==\"Enable_Pass\"),\n            DailyDisablePassCount = dcountif(ResourceId,OpType==\"Disable_Pass\"),\n            DailyInstallPassCount = dcountif(ResourceId,OpType==\"Install_Pass\"),\n            DailyUninstallPassCount = dcountif(ResourceId,OpType==\"Uninstall_Pass\")\n    by Date\n| summarize WeeklyEnablePassMax = round(max(DailyEnablePassCount),0),\n            WeeklyDisablePassMax = round(max(DailyDisablePassCount),0),\n            WeeklyInstallPassMax = round(max(DailyInstallPassCount),0),\n            WeeklyUninstallPassMax = round(max(DailyUninstallPassCount),0)\n    by bin_at(Date,7d,now())"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"561169c3-600b-46d9-879b-af2051f1bde8","title":"AMA Max Daily Failure Trend - Weekly","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":96,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Max Daily Failure Trend - Weekly\nunion cluster('genevaagent.kusto.windows.net').database('Telemetry').WinAMADailySnapshot,\n      cluster('genevaagent.kusto.windows.net').database('Telemetry').LnxAMADailySnapshot\n| where TblVer == 2\n| where Date > ago(63d)\n| summarize DailyEnableFailCount = dcountif(ResourceId,OpType==\"Enable_Fail\"),\n            DailyDisableFailCount = dcountif(ResourceId,OpType==\"Disable_Fail\"),\n            DailyInstallFailCount = dcountif(ResourceId,OpType==\"Install_Fail\"),\n            DailyUninstallFailCount = dcountif(ResourceId,OpType==\"Uninstall_Fail\")\n    by Date\n| summarize WeeklyEnableFailMax = round(max(DailyEnableFailCount),0),\n            WeeklyDisableFailMax = round(max(DailyDisableFailCount),0),\n            WeeklyInstallFailMax = round(max(DailyInstallFailCount),0),\n            WeeklyUninstallFailMax = round(max(DailyUninstallFailCount),0)\n    by bin_at(Date,7d,now())"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"4270a4fd-2ed3-4276-9554-01aa87c7f822","title":"Agent Version Linux Population","visualType":"pie","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":12,"y":26,"width":12,"height":14},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//AMA Version breakdown\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where OSVer !has \"windows\"\n| where StartTime > ago(31d)\n| where AgentVer != \"00.00.00\"\n| extend MA_Ver = AgentVer\n| extend AMA_Ver = iff(AgentVer==\"45.09.01\",\"1.4.0.0\",\n                   iff(AgentVer==\"45.10.04\",\"1.5.0.0\",\n                   iff(AgentVer==\"45.11.01\",\"1.6.0.0\",\n                   iff(AgentVer==\"45.12.01\",\"1.7.0.0\",\n                   iff(AgentVer==\"45.13.01\",\"1.8.0.0\",\n                   iff(AgentVer==\"45.14.04\",\"1.9.0.0\",\n                   iff(AgentVer==\"46.01.00\",\"1.10.0.0\",\n                   \"?\"\n                   )))))))\n| extend Both_Version = iff(AMA_Ver!=\"?\",strcat(MA_Ver,\" (\",AMA_Ver,\")\"),MA_Ver)\n| summarize DailyCount = count() by StartTime, Both_Version\n| summarize MonthlyAvg = round(avg(DailyCount),0) by Both_Version\n| where MonthlyAvg > 0\n| sort by MonthlyAvg\n"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"57564365-0aa5-4794-a084-5b74b34fab0f","title":"Linux Arc/Non-Arc Population","visualType":"pie","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":12,"y":40,"width":12,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Windows Pop by Arc type\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily\n| where StartTime > ago(31d)\n| where OSVer !has \"windows\"\n| extend ArcType = iif(ResourceId has \"/microsoft.HybridCompute/\", \"ARC\", \"NON-ARC\")\n| summarize DailyCount = count() by StartTime, ArcType\n| summarize MonthlyAvg = round(avg(DailyCount),0) by ArcType\n| where MonthlyAvg > 0\n| sort by MonthlyAvg\n"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"94419e86-4323-4041-8d9b-f3ef7465c2dd","title":"Windows Top 2000 customers of AMA & MMA by avg daily count","visualType":"table","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":64,"width":12,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Top customers MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('Telemetry').WinMMACustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\n      cluster(\"genevaagent.kusto.windows.net\").database(\"Telemetry\").WinMMACustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == NewestMMA\n| summarize MMA_Pop = sum(Population)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('AMA').WinAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\nunion cluster('genevaagent.kusto.windows.net').database('AMA').WinAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == NewestAMA\n| summarize Win_AMA = sum(Population) by Customer\n| top 2000 by Win_AMA\n;\nAMA_cust_pop\n| join kind=leftouter MMA_cust_pop on Customer\n| project-away Customer1\n| extend MMA_Pop = iff(isempty(MMA_Pop),0.0,MMA_Pop)\n| extend AMA_Perc = round((Win_AMA/(Win_AMA + MMA_Pop))*100,2)\n| sort by Win_AMA desc\n| project-reorder Customer, Win_AMA, MMA_Pop, AMA_Perc"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}},{"id":"f29d9d4b-0d6a-41fe-8e9f-6e95da0d9ab3","title":"Linux Top 2000 customers of AMA & OMS by avg daily count","visualType":"table","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":12,"y":64,"width":12,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Top customers OMS by AgentId Count\nlet NewestOMS = toscalar(cluster('genevaagent.kusto.windows.net').database('Telemetry').LnxOMSCustomerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"Telemetry\").LnxOMSCustomerWeeklySnapshot\n| where TblVer == 3\n| where Date == NewestOMS\n| summarize OMS_Pop = sum(Population)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('AMA').LnxAMACustomerWeeklySnapshot\n    | where TblVer == 2\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\n      cluster('genevaagent.kusto.windows.net').database('AMA').LnxAMACustomerWeeklySnapshot\n| where TblVer == 2\n| where Date == NewestAMA\n| summarize Lnx_AMA = sum(Population) by Customer\n| top 2000 by Lnx_AMA\n;\nAMA_cust_pop\n| join kind=leftouter MMA_cust_pop on Customer\n| project-away Customer1\n| extend OMS_Pop = iff(isempty(OMS_Pop),0.0,OMS_Pop)\n| extend AMA_Perc = round((Lnx_AMA/(Lnx_AMA + OMS_Pop))*100,2)\n| sort by Lnx_AMA desc\n| project-reorder Customer, Lnx_AMA, OMS_Pop, AMA_Perc"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}]}},{"id":"0ac2724e-1d3c-46c9-b273-4d926a20313d","title":"Windows AMA Current Pop Estimation","visualType":"card","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":8,"y":0,"width":8,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"let AMApop =\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where OSVer has \"windows\"\n| where StartTime > ago(62d)\n| summarize DailyCount = count() by StartTime\n| summarize MonthlyAvg = round(max(DailyCount),0)\n;\nAMApop"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"6d2e9608-bb25-4fd4-ab68-1c8d4ee74bdf","title":"Linux AMA Current Pop Estimation","visualType":"card","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":16,"y":0,"width":8,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"let AMApop =\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where OSVer !has \"windows\"\n| where StartTime > ago(60d)\n| summarize DailyCount = count() by StartTime\n| summarize MonthlyAvg = round(max(DailyCount),0)\n;\nAMApop"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"5ad37704-25b8-4bbf-9995-a2e9fadccabe","title":"Linux Top OS/distro Version Populations","visualType":"pie","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":12,"y":13,"width":12,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Current pop by OS version\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where OSVer !has \"windows\"\n| where StartTime > ago(31d)\n| summarize DailyCount = count() by StartTime, OSVer\n| summarize MonthlyAvg = round(max(DailyCount),0) by OSVer\n| where MonthlyAvg > 0\n| sort by MonthlyAvg\n| take 20"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"2e45715b-a978-4023-b615-05ade5b6de67","title":"Windows AMA Max Daily Success Trend - Weekly","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":86,"width":12,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Windows Max Daily Success Trend - Weekly\ncluster('genevaagent.kusto.windows.net').database('Telemetry').WinAMADailySnapshot\n| where TblVer == 2\n| where Date > ago(63d)\n| summarize DailyEnablePassCount = dcountif(ResourceId,OpType==\"Enable_Pass\"),\n            DailyDisablePassCount = dcountif(ResourceId,OpType==\"Disable_Pass\"),\n            DailyInstallPassCount = dcountif(ResourceId,OpType==\"Install_Pass\"),\n            DailyUninstallPassCount = dcountif(ResourceId,OpType==\"Uninstall_Pass\")\n    by Date\n| summarize WeeklyEnablePassMax = round(max(DailyEnablePassCount),0),\n            WeeklyDisablePassMax = round(max(DailyDisablePassCount),0),\n            WeeklyInstallPassMax = round(max(DailyInstallPassCount),0),\n            WeeklyUninstallPassMax = round(max(DailyUninstallPassCount),0)\n    by bin_at(Date,7d,now())"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"b9a90a4d-ce97-482c-85f9-e613464dcbe0","title":"Linux AMA Max Daily Success Trend - Weekly","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":12,"y":86,"width":12,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Linux Max Daily Success Trend - Weekly\ncluster('genevaagent.kusto.windows.net').database('Telemetry').LnxAMADailySnapshot\n| where TblVer == 2\n| where Date > ago(63d)\n| summarize DailyEnablePassCount = dcountif(ResourceId,OpType==\"Enable_Pass\"),\n            DailyDisablePassCount = dcountif(ResourceId,OpType==\"Disable_Pass\"),\n            DailyInstallPassCount = dcountif(ResourceId,OpType==\"Install_Pass\"),\n            DailyUninstallPassCount = dcountif(ResourceId,OpType==\"Uninstall_Pass\")\n    by Date\n| summarize WeeklyEnablePassMax = round(max(DailyEnablePassCount),0),\n            WeeklyDisablePassMax = round(max(DailyDisablePassCount),0),\n            WeeklyInstallPassMax = round(max(DailyInstallPassCount),0),\n            WeeklyUninstallPassMax = round(max(DailyUninstallPassCount),0)\n    by bin_at(Date,7d,now())"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"e401e94b-9a6f-46db-936f-74f81a466565","title":"Windows AMA Max Daily Failure Trend - Weekly","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":0,"y":105,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Windows Max Daily Failure Trend - Weekly\ncluster('genevaagent.kusto.windows.net').database('Telemetry').WinAMADailySnapshot\n| where TblVer == 2\n| where Date > ago(63d)\n| summarize DailyEnableFailCount = dcountif(ResourceId,OpType==\"Enable_Fail\"),\n            DailyDisableFailCount = dcountif(ResourceId,OpType==\"Disable_Fail\"),\n            DailyInstallFailCount = dcountif(ResourceId,OpType==\"Install_Fail\"),\n            DailyUninstallFailCount = dcountif(ResourceId,OpType==\"Uninstall_Fail\")\n    by Date\n| summarize WeeklyEnableFailMax = round(max(DailyEnableFailCount),0),\n            WeeklyDisableFailMax = round(max(DailyDisableFailCount),0),\n            WeeklyInstallFailMax = round(max(DailyInstallFailCount),0),\n            WeeklyUninstallFailMax = round(max(DailyUninstallFailCount),0)\n    by bin_at(Date,7d,now())"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}},{"id":"0fdf8c2b-0b9b-4700-a3c6-1bc10c5740a4","title":"Linux AMA Max Daily Failure Trend - Weekly","visualType":"timechart","pageId":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7","layout":{"x":12,"y":105,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8"},"usedVariables":[],"text":"//Linux  Max Daily Failure Trend - Weekly\ncluster('genevaagent.kusto.windows.net').database('Telemetry').LnxAMADailySnapshot\n| where TblVer == 2\n| where Date > ago(63d)\n| summarize DailyEnableFailCount = dcountif(ResourceId,OpType==\"Enable_Fail\"),\n            DailyDisableFailCount = dcountif(ResourceId,OpType==\"Disable_Fail\"),\n            DailyInstallFailCount = dcountif(ResourceId,OpType==\"Install_Fail\"),\n            DailyUninstallFailCount = dcountif(ResourceId,OpType==\"Uninstall_Fail\")\n    by Date\n| summarize WeeklyEnableFailMax = round(max(DailyEnableFailCount),0),\n            WeeklyDisableFailMax = round(max(DailyDisableFailCount),0),\n            WeeklyInstallFailMax = round(max(DailyInstallFailCount),0),\n            WeeklyUninstallFailMax = round(max(DailyUninstallFailCount),0)\n    by bin_at(Date,7d,now())"},"visualOptions":{"hideTileTitle":false,"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"crossFilter":[],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"08864796-4b5e-423d-bbb8-c356a44daa75","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"selection","pageIds":[]}},{"kind":"string","selectionType":"freetext","id":"4f7a8544-fd41-4ec2-bf59-1149076ce777","displayName":"Customer(SubscriptionId)","variableName":"CustomerSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"]}},{"kind":"string","selectionType":"freetext","id":"cbb1a6cd-a6ce-44f1-909e-23dc1f7e6dd8","displayName":"Solution","variableName":"SolutionSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["abdd00b4-5e83-497d-a2c3-661d5d37f13c"]}},{"kind":"string","selectionType":"freetext","id":"900f1a93-cd36-46c2-97a9-17e7c20487ef","displayName":"CustomerName","variableName":"CustomerNameSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"]}}],"dataSources":[{"id":"87e57c9f-3ee0-4618-a4eb-6a88ba2ebae8","name":"GenevaAgentTelemetry","clusterUri":"https://genevaagent.kusto.windows.net/","database":"Telemetry","kind":"manual-kusto","scopeId":"kusto"},{"id":"f0dc3546-d207-4d8f-8086-cb812e7ed7a5","name":"rdos","clusterUri":"https://rdos.kusto.windows.net/","database":"rdos","kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"Agent Team","id":"6153c597-c0c8-4245-bafe-3e26dc8aa1e7"}]}