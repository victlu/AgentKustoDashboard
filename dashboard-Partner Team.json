{"$schema":"https://dataexplorer.azure.com/static/d/schema/33/dashboard.json","id":"d90719d7-fa51-4cd7-b5eb-bae3564043f2","eTag":"XSVYqz1A/m3ko1w4NWaTmQ==","schema_version":"33","title":"Partner Team","autoRefresh":{"enabled":false},"sharedQueries":[],"tiles":[{"id":"15326b7f-1fab-47f4-b7d4-77730c15b943","title":"Customers of AMA & MMA/OMS by avg daily count","visualType":"table","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":8,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["Sales_Segment_PartnerTeam"],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestMMA\n| where isempty(['Sales_Segment_PartnerTeam']) or SalesSegment == ['Sales_Segment_PartnerTeam']\n| summarize Total_MMA_OMS_Pop = sum(Population),\n            Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| where isempty(['Sales_Segment_PartnerTeam']) or SalesSegment == ['Sales_Segment_PartnerTeam']\n| summarize Total_AMA_Pop = sum(Population),\n            AMA_Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nAMA_cust_pop\n| join kind=fullouter MMA_cust_pop on Customer\n| extend Sales_Segments = iff(isempty(Sales_Segments),AMA_Sales_Segments,Sales_Segments)\n| project-away Customer1, AMA_Sales_Segments\n| extend Total_MMA_OMS_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend Total_AMA_Pop = iff(isempty(Total_AMA_Pop),0.0,Total_AMA_Pop)\n| where not(Total_AMA_Pop == 0 and Total_MMA_OMS_Pop == 0)\n| extend Percent_Migrated = round((Total_AMA_Pop/(Total_AMA_Pop + Total_MMA_OMS_Pop))*100,2)\n| sort by Total_AMA_Pop desc\n| project-reorder Customer, Total_AMA_Pop, Total_MMA_OMS_Pop, Percent_Migrated, Sales_Segments"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"c5fbe0c0-e2fa-42d8-9a07-4fd5b93ed26d","title":"Windows Customers of AMA or MMA by avg daily count","visualType":"table","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":17,"width":12,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["Sales_Segment_PartnerTeam"],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestMMA\n| where isempty(['Sales_Segment_PartnerTeam']) or SalesSegment == ['Sales_Segment_PartnerTeam']\n| summarize Total_MMA_OMS_Pop = sum(Population),\n            Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| where isempty(['Sales_Segment_PartnerTeam']) or SalesSegment == ['Sales_Segment_PartnerTeam']\n| summarize Total_AMA_Pop = sum(Population),\n            AMA_Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nAMA_cust_pop\n| join kind=fullouter MMA_cust_pop on Customer\n| extend Sales_Segments = iff(isempty(Sales_Segments),AMA_Sales_Segments,Sales_Segments)\n| project-away Customer1, AMA_Sales_Segments\n| extend MMA_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend AMA_Pop = iff(isempty(Total_AMA_Pop),0.0,Total_AMA_Pop)\n| where not(AMA_Pop == 0 and MMA_Pop == 0)\n| extend Per_Migrated = round((AMA_Pop/(AMA_Pop + MMA_Pop))*100,2)\n| sort by AMA_Pop desc\n| project-reorder Customer, AMA_Pop, MMA_Pop, Per_Migrated, Sales_Segments"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"1cac526c-2322-410f-8bb7-c54401fcf870","title":"Linux Customers of AMA or OMS by avg daily count","visualType":"table","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":12,"y":17,"width":12,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["Sales_Segment_PartnerTeam"],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestMMA\n| where isempty(['Sales_Segment_PartnerTeam']) or SalesSegment == ['Sales_Segment_PartnerTeam']\n| summarize Total_MMA_OMS_Pop = sum(Population),\n            Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| where isempty(['Sales_Segment_PartnerTeam']) or SalesSegment == ['Sales_Segment_PartnerTeam']\n| summarize Total_AMA_Pop = sum(Population),\n            AMA_Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nAMA_cust_pop\n| join kind=fullouter MMA_cust_pop on Customer\n| extend Sales_Segments = iff(isempty(Sales_Segments),AMA_Sales_Segments,Sales_Segments)\n| project-away Customer1, AMA_Sales_Segments\n| extend OMS_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend AMA_Pop = iff(isempty(Total_AMA_Pop),0.0,Total_AMA_Pop)\n| where not(AMA_Pop == 0 and OMS_Pop == 0)\n| extend Per_Migrated = round((AMA_Pop/(AMA_Pop + OMS_Pop))*100,2)\n| sort by AMA_Pop desc\n| project-reorder Customer, AMA_Pop, OMS_Pop, Per_Migrated, Sales_Segments"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"cd1ce700-695f-4c56-87ca-188fa19d47e9","title":"Solution distribution on OMS/MMA ","visualType":"bar","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":24,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Features  used on MMA/OMS by number of agents\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet Customer_MMAOMS_Solutions =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 3\n| extend GroupedSolution = iff(GroupedSolution == \"Defender for Servers\", \"Defender for Cloud\", GroupedSolution)\n| summarize No_of_Machines = sum(Population) by GroupedSolution\n| sort by No_of_Machines desc\n;\nCustomer_MMAOMS_Solutions\n| sort by No_of_Machines desc"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"GroupedSolution","parameterId":"cb1d5fad-beba-4946-8c8b-e1bb3934dc9d","disabled":false}],"drillthrough":[]}},{"id":"c522b686-34ca-4bc0-8133-80effdb848ad","title":"Extension distribution with AMA","visualType":"bar","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":12,"y":24,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Features  used on AMA by number of agents\nlet AMA_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 8\n    | project Date\n    | top 1 by Date );\nlet Customer_AMA_Solutions =\nunion cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n| where Date == AMA_Newest\n| where TblVer == 8\n| where GroupedSolution != \"Ignored For Reporting\"\n| extend GroupedSolution = iff(GroupedSolution == \"Defender for Servers\", \"Defender for Cloud\", GroupedSolution)\n| summarize No_of_Machines = sum(Population) by GroupedSolution\n| sort by No_of_Machines desc\n;\nCustomer_AMA_Solutions"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"GroupedSolution","parameterId":"cb1d5fad-beba-4946-8c8b-e1bb3934dc9d","disabled":false}],"drillthrough":[]}},{"id":"89d47580-5f0b-4c84-b84a-5f1067a3d04a","title":"Total OMS/MMA machines with selected Solution","visualType":"card","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":36,"width":12,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//Solutions used on MMA/OMS by number of agents\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet Customer_MMAOMS_Solutions =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 3\n| summarize MMA_OMS_Population = sum(Population) by GroupedSolution\n| sort by MMA_OMS_Population desc\n;\nCustomer_MMAOMS_Solutions\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| project MMA_OMS_Population"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"0a57438d-c52b-4f80-b7cd-a8daf14aec78","title":"Total AMA machines and selected extension/solution","visualType":"card","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":12,"y":36,"width":12,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//Solutions used on MMA/OMS by number of agents\nlet AMAextonly = 'AMA extension only';\nlet AMA_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 8\n    | project Date\n    | top 1 by Date );\nlet Customer_AMA_Solutions =\nunion cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n| where Date == AMA_Newest\n| where TblVer == 8\n| summarize AMA_Population = sum(Population) by GroupedSolution\n| sort by AMA_Population desc\n;\nCustomer_AMA_Solutions\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| project AMA_Population"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"10e6e9f9-a5af-4e51-b70f-0870813ffcca","title":"Solution/Extension Selected","visualType":"card","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":33,"width":13,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"print SolutionSelect_Partner"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"b4dad57e-5b8b-4536-a94e-a0f525b6b2e0","title":"AMA machines trend for selected Solution/Extension","visualType":"timechart","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":12,"y":39,"width":12,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//AMA Feature trend by number of agents \nlet Win_AMA_Feature_Pop =\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n| where TblVer == 8\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| extend Date = startofweek(Date)\n| summarize Win_AMA_Population = sum(Population) by Date\n;\nlet Lnx_AMA_Feature_Pop =\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerSolutionsWeeklySnapshot\n| where TblVer == 8\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| extend Date = startofweek(Date)\n| summarize Lnx_AMA_Population = sum(Population) by Date\n;\nWin_AMA_Feature_Pop\n| join kind=leftouter Lnx_AMA_Feature_Pop on Date\n| project-away Date1\n| summarize Win_AMA_Month_Population = round(avg(Win_AMA_Population),0), \n            Lnx_AMA_Month_Population = round(avg(Lnx_AMA_Population),0)\n            by bin_at(Date, 31d, now())"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3191d5c2-7481-4f85-991f-0669b48f7883","title":"OMS/MMA machines trend for selected Solution","visualType":"timechart","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":39,"width":12,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//OMS/MMA Selected Feature trend by number of agents \n\nlet Win_MMA_Feature_Pop =\ncluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n| where TblVer == 3\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| extend Date = startofweek(Date)\n| summarize Win_MMA_Population = sum(Population) by Date\n;\nlet Lnx_OMS_Feature_Pop =\ncluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where TblVer == 3\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| extend Date = startofweek(Date)\n| summarize Lnx_OMS_Population = sum(Population) by Date\n;\nWin_MMA_Feature_Pop\n| join kind=leftouter Lnx_OMS_Feature_Pop on Date\n| project-away Date1\n| summarize Win_MMA_Month_Population = round(avg(Win_MMA_Population),0), \n            Lnx_OMS_Month_Population = round(avg(Lnx_OMS_Population),0)\n            by bin_at(Date, 31d, now())"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"f5d3caba-85cf-47ad-8c9d-24fe77b23714","title":"To select a solution/extension:","visualType":"markdownCard","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":13,"y":33,"width":11,"height":3},"query":{"kind":"inline","usedVariables":[],"text":"- right-click on one of the solutions or extensions in the charts above\n- select cross-filter"},"visualOptions":{}},{"id":"6504722a-a3cb-440f-9e5b-c959cacca1f5","title":"Solution/Extension Selected","visualType":"card","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":46,"width":24,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"print strcat(\"Customers using \",  SolutionSelect_Partner)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"23150ba9-89f9-4042-8c96-55e737f550c8","title":"Top 2000 customers by MMA pop for selected feature","visualType":"table","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":49,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//Top 2000 customers by MMA pop for selected feature\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OMS_cust_pop =\nunion\ncluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where TblVer == 3\n| where Date == NewestMMA\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| summarize Total_Pop = sum(Population)\n            by Customer\n;\nMMA_OMS_cust_pop\n| top 2000 by Total_Pop"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"76cef335-5b1f-4586-98bc-9f5f8e302c20","title":"Top 2000 customers by AMA pop for selected feature","visualType":"table","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":59,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//Top 2000 customers by AMA pop for selected feature\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 8\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\nunion\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerSolutionsWeeklySnapshot\n| where TblVer == 8\n| where Date == NewestMMA\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| summarize Total_Pop = sum(Population)\n            by Customer\n;\nAMA_cust_pop\n| top 2000 by Total_Pop"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"d2b949ab-db5a-4c90-97ce-f5d0439acf9f","title":"Trend of Unique MMA Customers with selected feature","visualType":"timechart","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":11,"y":49,"width":13,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//Trend of Unique MMA Customers with selected feature\nlet MMA_OMS_unique_count =\nunion\ncluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where TblVer == 3\n| where Date > ago(366d)\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| summarize Customer_Count = dcount(Customer) by startofmonth(Date)\n;\nMMA_OMS_unique_count"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"7fcb79e5-abce-423f-abe4-9bb09097e5d2","title":"Trend of Unique AMA Customers with selected feature","visualType":"timechart","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":11,"y":59,"width":13,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect_Partner"],"text":"//Trend of Unique AMA Customers with selected feature\nlet AMA_unique_count =\nunion\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerSolutionsWeeklySnapshot\n| where TblVer == 8\n| where Date > ago(366d)\n| where isempty(['SolutionSelect_Partner']) or GroupedSolution == ['SolutionSelect_Partner'] // Freetext filtering\n| summarize Customer_Count = dcount(Customer) by startofmonth(Date)\n;\nAMA_unique_count"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}},{"id":"bf7f5ff6-ec8f-4d18-b426-5df47abefa1c","title":"Total migration % metric (AMA pop/MMA_OMS pop)","visualType":"timechart","pageId":"f319b8c3-3325-476b-9db8-af3b4fe1f993","layout":{"x":0,"y":0,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Total migration % metric (AMA pop/MMA_OMS pop)\nlet AMA_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').AMA_MMAOMS_DailyCountsSnapshot \n| summarize DailyCount = (sum(Win_AMA_DailyCount_All)+sum(Lnx_AMA_DailyCount_All)) by Date\n| extend month = startofmonth(Date)\n| summarize Montly_AMA_Pop = round(max(DailyCount),0) by month\n;\nlet MMA_OMS_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').AMA_MMAOMS_DailyCountsSnapshot \n| summarize DailyCount = (sum(Win_MMA_DailyCount_All)+sum(Lnx_OMS_DailyCount_All)) \n                          by Date\n| extend month = startofmonth(Date)\n| summarize Montly_MMA_OMS_Pop = round(max(DailyCount),0) by month\n;\nAMA_pop\n| join kind=inner MMA_OMS_pop on month\n| project-away month1\n| extend migrationPercentage = round((Montly_AMA_Pop/Montly_MMA_OMS_Pop),3)\n| project month, migrationPercentage\n| render timechart "},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"08864796-4b5e-423d-bbb8-c356a44daa75","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"selection","pageIds":[]}},{"kind":"string","selectionType":"freetext","id":"4f7a8544-fd41-4ec2-bf59-1149076ce777","displayName":"Customer(SubscriptionId)","variableName":"CustomerSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"]}},{"kind":"string","selectionType":"freetext","id":"cbb1a6cd-a6ce-44f1-909e-23dc1f7e6dd8","displayName":"Solution","variableName":"SolutionSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["abdd00b4-5e83-497d-a2c3-661d5d37f13c"]}},{"kind":"string","selectionType":"freetext","id":"900f1a93-cd36-46c2-97a9-17e7c20487ef","displayName":"CustomerName","variableName":"CustomerNameSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"]}},{"kind":"string","selectionType":"freetext","id":"5dcd507b-76b6-418b-8ff2-de7827515e44","displayName":"CustomerName_Field","variableName":"CustomerNameSelect_Field","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["0f11bccd-e020-49cf-988e-0af9d9077278"]}},{"kind":"string","selectionType":"freetext","id":"cb1d5fad-beba-4946-8c8b-e1bb3934dc9d","displayName":"Solution_PartnerTeam","variableName":"SolutionSelect_Partner","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["f319b8c3-3325-476b-9db8-af3b4fe1f993"]}},{"kind":"string","id":"ffb701d4-55f4-4213-a553-48a97d15cbd7","displayName":"Sales_Segment","variableName":"Sales_Segment_PartnerTeam","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//----------------------------------------------------------------------------\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestMMA\n| distinct SalesSegment\n;\nMMA_cust_pop\n| sort by SalesSegment asc "},"columns":{"value":"SalesSegment"}},"showOnPages":{"kind":"selection","pageIds":["f319b8c3-3325-476b-9db8-af3b4fe1f993"]}}],"dataSources":[{"id":"1744db72-6d19-46bb-ae67-eb77c91db237","name":"GenevaAgentBI","clusterUri":"https://genevaagent.kusto.windows.net/","database":"BI","kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"Partner Teams","id":"f319b8c3-3325-476b-9db8-af3b4fe1f993"}]}