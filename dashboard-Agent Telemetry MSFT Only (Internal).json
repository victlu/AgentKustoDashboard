{"$schema":"https://dataexplorer.azure.com/static/d/schema/35/dashboard.json","id":"be8d15c9-62c6-4748-acf0-e86e50a31e42","eTag":"WMlPlg5be870Avjo86k/hA==","schema_version":"35","title":"Agent Telemetry MSFT Only (Internal)","autoRefresh":{"enabled":false},"sharedQueries":[],"tiles":[{"id":"53d69afd-c72e-4baa-8709-fcd439d749e6","title":"MMA & AMA Windows Population Trend","visualType":"line","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":0,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Windows Population Trend MMA & AMA\nlet MMA_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| summarize MMA_weekByWeek_Count = sum(Population) by Date\n| summarize MMA_MonthlyAvg = round(avg(MMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nlet AMA_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n| where TblVer == 4\n| summarize AMA_weekByWeek_Count = sum(Population) by Date\n| summarize AMA_MonthlyAvg = round(avg(AMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nMMA_pop\n| join AMA_pop on Date | project-away Date1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"pie__TopNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"27f2ffac-53d5-47cd-a84d-399729b15a78","title":"OMS & AMA Linux Population Trend","visualType":"line","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":12,"y":0,"width":12,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Linux Population Trend AMA & OMS\nlet OMS_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot\n| where TblVer == 5\n| summarize OMS_weekByWeek_Count = sum(Population) by Date\n| summarize OMS_snap_MonthlyAvg = round(avg(OMS_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nlet AMA_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| summarize AMA_weekByWeek_Count = sum(Population) by Date\n| summarize AMA_snap_MonthlyAvg = round(avg(AMA_weekByWeek_Count),0) by Date = startofmonth(Date)\n;\nOMS_pop\n| join AMA_pop on Date | project-away Date1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"pie__TopNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"f9a7bd41-67df-4409-be5d-95b597cf2de3","title":"Top 2000 customers of OMS/MMA by avg daily agent count","visualType":"table","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":12,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Top customers OMS/MMA by AgentId Count\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| summarize CustomerPop = sum(Population) by Customer, CSAM\n| project-reorder Customer, CustomerPop, CSAM\n| top 2000 by CustomerPop"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}],"table__renderLinks":[]}},{"id":"5ab8fe52-f316-4004-9abf-1b769a8baac4","title":"Top 2000 customers of AMA by avg daily agent count ","visualType":"table","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":24,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//AMA top customers\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == Newest\n| summarize CustomerPop = sum(Population) by Customer, CSAM \n| project-reorder Customer, CustomerPop, CSAM\n| top 2000 by CustomerPop"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}],"table__renderLinks":[]}},{"id":"9ef41e2d-1d67-45a9-a968-dc2545133309","title":"SubscriptionId Name","visualType":"card","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":0,"width":14,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"print ['CustomerSelect']\n"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null}},{"id":"5cdb025e-e590-4997-9dbe-2dbe395089d7","title":"Agent population (AMA vs OMS/MMA) by subscription ID","visualType":"bar","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":6,"width":23,"height":6},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"//Agent population (AMA vs OMS/MMA) by subscription ID\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet Subscriptions_MMA_OMS_Agent_Pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == MMAOMS_Newest\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect'] // Freetext filtering\n| summarize total_MMAOMS_agents = sum(Population) by SubscriptionId\n;\nlet AMA_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet Subscriptions_AMA_Agent_Pop =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == AMA_Newest\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect'] // Freetext filtering\n| summarize total_AMA_agents = sum(Population) by SubscriptionId\n;\nSubscriptions_MMA_OMS_Agent_Pop\n| join kind=fullouter Subscriptions_AMA_Agent_Pop on SubscriptionId\n| project-away SubscriptionId1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"pie__TopNSlices":null,"crossFilter":[],"drillthrough":[{"destinationPages":[],"disabled":false}]}},{"id":"9695c985-cc29-48e1-8a1c-1e706e3710d7","title":"Feature","visualType":"card","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":0,"y":0,"width":14,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect"],"text":"\nprint SolutionSelect"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"593df15e-e785-4e97-a220-27a9bf9d1be6","title":"Customer SubscriptionIds in MMA/OMS by Population","visualType":"table","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":6,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Customer SubscriptionIds in MMA/OMS by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal, OsType, Solutions\n| sort by Population desc\n;\nMMAOMS_Daily"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"4f7a8544-fd41-4ec2-bf59-1149076ce777","property":"SubscriptionId"}],"destinationPages":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"],"disabled":false}],"table__renderLinks":[]}},{"id":"fdc62a5e-6968-40ab-a196-7ce52aa62abc","title":"Customer SubscriptionIds in AMA by Population","visualType":"table","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":17,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"let Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n;\nAMA_Daily"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"4f7a8544-fd41-4ec2-bf59-1149076ce777","property":"SubscriptionId"}],"destinationPages":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"],"disabled":false}],"table__renderLinks":[]}},{"id":"e465c667-754a-48bf-89d4-21ca3b3c3541","title":"Customer Name","visualType":"card","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":3,"width":14,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"let p360_name =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot,\n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinAMACustomerWeeklySnapshot,\n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxAMACustomerWeeklySnapshot\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect']\n| project Customer\n;\np360_name"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"396dbed3-1943-49bb-9a8a-619d82607bf6","title":"Total MMA/OMS Population of Customer","visualType":"card","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":3,"width":14,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Customer SubscriptionIds in MMA/OMS by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal, Solutions\n| sort by Population desc\n;\nMMAOMS_Daily\n| summarize Total_MMAOMS_Pop = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"b11d405c-ffb3-412a-8a42-a894e177d905","title":"Customer Name","visualType":"card","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":0,"width":14,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"print CustomerNameSelect"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null}},{"id":"7abcfb8d-fb0b-45af-9512-9a85a6929588","title":"Trend of MMA/OMS & AMA Population of Customer","visualType":"timechart","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":25,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Trend of MMA/OMS & AMA Population of Customer\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal, Solutions\n| sort by Population desc\n| summarize Customer_Total_MMA_OMS_Pop = sum(Population) by Date\n;\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n| summarize Customer_Total_AMA_Pop = sum(Population) by Date\n;\nMMAOMS_Daily\n| join kind=leftouter AMA_Daily on Date\n| project-away Date1"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"pie__TopNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"aaa3723c-5702-478e-ae28-359a93fc8de2","title":"Total AMA Population of Customer","visualType":"card","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":0,"y":14,"width":10,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect"],"text":"//Customer SubscriptionIds in AMA by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == Newest\n| where isempty(['CustomerNameSelect']) or Customer == ['CustomerNameSelect']\n| project Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n;\nAMA_Daily\n| summarize Total_AMA_Pop = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"a7917a5d-6c67-40cf-9116-a730aa198924","title":"Features used on OMS/MMA by number of agents","visualType":"bar","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":0,"y":12,"width":23,"height":12},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerSelect"],"text":"//Features used on MMA/OMS by number of agents\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet Customer_MMAOMS_Solutions =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 4\n| where isempty(['CustomerSelect']) or SubscriptionId == ['CustomerSelect'] // Freetext filtering\n| summarize SolutionPopulation = sum(Population) by GroupedSolution\n| sort by SolutionPopulation desc\n;\nCustomer_MMAOMS_Solutions"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"cbb1a6cd-a6ce-44f1-909e-23dc1f7e6dd8","property":"GroupedSolution"}],"destinationPages":["abdd00b4-5e83-497d-a2c3-661d5d37f13c"],"disabled":false}]}},{"id":"18c4f72e-671a-4b38-a6c1-31cb905a8ab1","title":"OMS/MMA Customers Population of agents using selected Feature","visualType":"table","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":0,"y":3,"width":23,"height":12},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect"],"text":"//OMS/MMA Customers Population of agents using selected Feature\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet Customers_MMAOMS_for_Solution =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 4\n| where isempty(['SolutionSelect']) or GroupedSolution has ['SolutionSelect']\n| summarize CustomerPopulation = sum(Population) by Customer, CSAM \n| project-reorder Customer, CustomerPopulation, CSAM\n| sort by CustomerPopulation desc\n;\nCustomers_MMAOMS_for_Solution"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":false,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}],"table__renderLinks":[]}},{"id":"f96383e6-f83b-43db-bb20-e603d901a587","title":"OMS/MMA Subscription Populations of agents using selected Feature","visualType":"table","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":0,"y":15,"width":23,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["SolutionSelect"],"text":"//OMS/MMA Subscription Populations of agents using selected Feature \nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet Customers_MMAOMS_for_Solution =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 4\n| where isempty(['SolutionSelect']) or GroupedSolution has ['SolutionSelect']\n| summarize Subscription_Population = sum(Population) by SubscriptionId, Customer, CSAM\n| sort by Subscription_Population desc\n| project-reorder SubscriptionId, Subscription_Population, Customer, CSAM\n;\nCustomers_MMAOMS_for_Solution"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":false,"crossFilterDisabled":false,"drillthroughDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"4f7a8544-fd41-4ec2-bf59-1149076ce777","property":"SubscriptionId"}],"destinationPages":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"],"disabled":false},{"pairs":[{"parameterId":"900f1a93-cd36-46c2-97a9-17e7c20487ef","property":"Customer"}],"destinationPages":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"],"disabled":false}],"table__renderLinks":[]}},{"id":"8e95786e-e90f-4fbd-91d6-44ea7f1f95be","title":"MMA Customers with agent populations that are older than 10_20_18053 with 22s included","visualType":"table","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":19,"width":24,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet NewestSol = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | top 1 by Date );\nlet MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n| summarize Breaking_Agent = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by Customer, Customer_TPID, CSAM\n| project-reorder Customer, Breaking_Agent, CSAM, Customer_TPID\n| sort by Breaking_Agent desc\n;\nlet SolutionsData =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerSolutionsWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestSol\n| summarize GroupedSolutions = make_set(GroupedSolution) by Customer\n;\nMMA_BreakingAgent\n| join kind=leftouter SolutionsData on Customer\n| project-away Customer1\n| extend Customer = iff(Customer == '', 'Unknown', Customer)\n| sort by Breaking_Agent desc"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":false,"crossFilterDisabled":false,"drillthroughDisabled":true,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[{"interaction":"column","property":"Customer","parameterId":"0abc1729-675e-4c00-a1d8-44ce79966451","disabled":false}],"drillthrough":[],"table__renderLinks":[]}},{"id":"608eea90-46e5-46da-bc5a-6b381803b73b","title":"Latest MMA/OMS agent pop estimation","visualType":"card","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":9,"width":12,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA/OMS customer, their agent pop, and CSAM\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_All_Agent =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal, CSAM\n| summarize Total_Population = sum(Population)\n;\nMMAOMS_All_Agent"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"92629a5c-07ec-4b24-a1db-39e74c3ca1dc","title":"ALL customers using MMA/OMS with % migrated to AMA","visualType":"table","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":5,"width":24,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["Sales_Segment_Field"],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == NewestMMA\n| where isempty(['Sales_Segment_Field']) or SalesSegment == ['Sales_Segment_Field']\n| summarize Total_MMA_OMS_Pop = sum(Population),\n            Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| where isempty(['Sales_Segment_Field']) or SalesSegment == ['Sales_Segment_Field']\n| summarize Total_AMA_Pop = sum(Population),\n            AMA_Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nMMA_cust_pop\n| join kind=leftouter AMA_cust_pop on Customer\n| extend Sales_Segments = iff(isempty(Sales_Segments),AMA_Sales_Segments,Sales_Segments)\n| project-away Customer1, AMA_Sales_Segments\n| extend Total_MMA_OMS_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend Total_AMA_Pop = iff(isempty(Total_AMA_Pop),0.0,Total_AMA_Pop)\n| where not(Total_AMA_Pop == 0 and Total_MMA_OMS_Pop == 0)\n| where not(isempty(Customer))\n| extend Percent_Migrated = round((Total_AMA_Pop/(Total_AMA_Pop + Total_MMA_OMS_Pop))*100,2)\n| sort by Total_MMA_OMS_Pop desc\n| project-reorder Customer, Total_AMA_Pop, Total_MMA_OMS_Pop, Percent_Migrated, Sales_Segments"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[],"table__renderLinks":[]}},{"id":"8d715304-c65d-441b-bcbf-f0f204b09fa3","title":"Windows Customers of AMA or MMA by avg daily count","visualType":"table","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":15,"width":12,"height":11},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["Sales_Segment_Field"],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == NewestMMA\n| where isempty(['Sales_Segment_Field']) or SalesSegment == ['Sales_Segment_Field']\n| summarize Total_MMA_OMS_Pop = sum(Population),\n            Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| where isempty(['Sales_Segment_Field']) or SalesSegment == ['Sales_Segment_Field']\n| summarize Total_AMA_Pop = sum(Population),\n            AMA_Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nAMA_cust_pop\n| join kind=fullouter MMA_cust_pop on Customer\n| extend Sales_Segments = iff(isempty(Sales_Segments),AMA_Sales_Segments,Sales_Segments)\n| project-away Customer1, AMA_Sales_Segments\n| extend MMA_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend AMA_Pop = iff(isempty(Total_AMA_Pop),0.0,Total_AMA_Pop)\n| where not(AMA_Pop == 0 and MMA_Pop == 0)\n| extend Per_Migrated = round((AMA_Pop/(AMA_Pop + MMA_Pop))*100,2)\n| sort by AMA_Pop desc\n| project-reorder Customer, AMA_Pop, MMA_Pop, Per_Migrated, Sales_Segments"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[],"table__renderLinks":[]}},{"id":"51fbb0f4-a889-41d4-909e-27d348b3b9fe","title":"Linux Customers of AMA & OMS by avg daily count","visualType":"table","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":12,"y":15,"width":12,"height":11},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["Sales_Segment_Field"],"text":"//Top customers OMS/MMA by AgentId Count\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == NewestMMA\n| where isempty(['Sales_Segment_Field']) or SalesSegment == ['Sales_Segment_Field']\n| summarize Total_MMA_OMS_Pop = sum(Population),\n            Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nlet NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_cust_pop =\ncluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| where isempty(['Sales_Segment_Field']) or SalesSegment == ['Sales_Segment_Field']\n| summarize Total_AMA_Pop = sum(Population),\n            AMA_Sales_Segments = make_set(SalesSegment)\n            by Customer\n;\nAMA_cust_pop\n| join kind=fullouter MMA_cust_pop on Customer\n| extend Sales_Segments = iff(isempty(Sales_Segments),AMA_Sales_Segments,Sales_Segments)\n| project-away Customer1, AMA_Sales_Segments\n| extend OMS_Pop = iff(isempty(Total_MMA_OMS_Pop),0.0,Total_MMA_OMS_Pop)\n| extend AMA_Pop = iff(isempty(Total_AMA_Pop),0.0,Total_AMA_Pop)\n| where not(AMA_Pop == 0 and OMS_Pop == 0)\n| extend Per_Migrated = round((AMA_Pop/(AMA_Pop + OMS_Pop))*100,2)\n| sort by AMA_Pop desc\n| project-reorder Customer, AMA_Pop, OMS_Pop, Per_Migrated, Sales_Segments"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"5dcd507b-76b6-418b-8ff2-de7827515e44","disabled":false}],"drillthrough":[],"table__renderLinks":[]}},{"id":"1cd1f13d-f0d2-44af-86b9-c44b96e9bf6d","title":"Customer Selected","visualType":"card","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":26,"width":15,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"print CustomerNameSelect_Field"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"24ef2ad6-1a3d-4909-ad88-627ee12fae21","title":"Total AMA Population of Selected Customer","visualType":"card","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":29,"width":12,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"//Customer SubscriptionIds in AMA by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == Newest\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field']\n| project Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n;\nAMA_Daily\n| summarize Total_AMA_Pop = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"044e3fb7-a471-441e-9170-318fd343da40","title":"Total MMA/OMS Population of Selected Customer","visualType":"card","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":12,"y":29,"width":12,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"//Customer SubscriptionIds in MMA/OMS by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field']\n| project Customer, SubscriptionId, Population, InternalOrExternal, Solutions\n| sort by Population desc\n;\nMMAOMS_Daily\n| summarize Total_MMAOMS_Pop = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":true,"colorRules":[],"colorStyle":"light"}},{"id":"9497c2a0-9546-48dd-ace8-5fcb85de7374","title":"Trend of MMA/OMS & AMA Population of Selected Customer","visualType":"timechart","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":32,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"//Trend of MMA/OMS & AMA Population of Customer\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field']\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal, Solutions\n| sort by Population desc\n| summarize Customer_Total_MMA_OMS_Pop = sum(Population) by Date\n;\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field']\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal\n| sort by Population desc\n| summarize Customer_Total_AMA_Pop = sum(Population) by Date\n;\nMMAOMS_Daily\n| join kind=leftouter AMA_Daily on Date\n| project-away Date1"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"29fe6113-62db-4193-90c1-ab4036e346ee","title":"Features used on OMS/MMA by Selected Customer","visualType":"pie","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":14,"y":41,"width":10,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"//Solutions used on MMA/OMS by number of agents\nlet MMAOMS_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet Customer_MMAOMS_Solutions =\nunion\n    cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot,\n    cluster('genevaagent.kusto.windows.net').database('BI').LnxOMSCustomerSolutionsWeeklySnapshot\n| where Date == MMAOMS_Newest\n| where TblVer == 4\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field'] // Freetext filtering\n| summarize SolutionPopulation = sum(Population) by GroupedSolution\n| sort by SolutionPopulation desc\n;\nCustomer_MMAOMS_Solutions"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"1635afa8-b096-4fa7-ad99-b8f0f66db022","title":"Selected Customer SubscriptionIds in AMA by Population","visualType":"table","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":51,"width":14,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"let Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_Daily =\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == Newest\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field']\n| project Customer, SubscriptionId, Population, InternalOrExternal, OsType\n| sort by Population desc\n;\nAMA_Daily"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}},{"id":"d30f57d1-68f7-47f2-8de1-91462f308f9c","title":"Selected Customer SubscriptionIds in MMA/OMS by Population","visualType":"table","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":41,"width":14,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"//Customer SubscriptionIds in MMA/OMS by Population\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | project Date\n    | top 1 by Date );\nlet MMAOMS_Daily =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field']\n| project Customer, SubscriptionId, Population, InternalOrExternal, OsType, Solutions\n| sort by Population desc\n;\nMMAOMS_Daily"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}},{"id":"e0cac79f-d4f5-4eb1-b184-da361d9a967f","title":"Extension distribution on AMA by Selected customer","visualType":"pie","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":14,"y":51,"width":10,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["CustomerNameSelect_Field"],"text":"//Solutions used on AMA by number of agents\nlet AMA_Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 8\n    | project Date\n    | top 1 by Date );\nlet Customer_AMA_Solutions =\nunion cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerSolutionsWeeklySnapshot,\ncluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerSolutionsWeeklySnapshot\n| where Date == AMA_Newest\n| where TblVer == 8\n| where isempty(['CustomerNameSelect_Field']) or Customer == ['CustomerNameSelect_Field'] // Freetext filtering\n| extend GroupedSolution = iff(GroupedSolution == \"None\", \"AMA extension only\", GroupedSolution)\n| summarize SolutionPopulation = sum(Population) by GroupedSolution\n| sort by SolutionPopulation desc\n;\nCustomer_AMA_Solutions"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"8e0fae4c-1b6e-425c-b209-e18018d92208","title":"To select a customer:","visualType":"markdownCard","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":15,"y":26,"width":9,"height":3},"query":{"kind":"inline","usedVariables":[],"text":"- right-click on one of the customer names in the charts above\n- select cross-filter"},"visualOptions":{}},{"id":"b751fa33-70d3-4c81-9341-8cf61bdd4000","title":"To select a customer:","visualType":"markdownCard","pageId":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","layout":{"x":14,"y":0,"width":9,"height":3},"query":{"kind":"inline","usedVariables":[],"text":"- right-click on one of the customer names in the charts in OMS->AMA Migration page\n- select drillthrough -> Customer View"},"visualOptions":{}},{"id":"f7712f15-c0a5-4250-9c76-ddaad93dba8e","title":"To select a subscriptionID","visualType":"markdownCard","pageId":"3bade44b-2e1b-4b7b-9970-4365c4d6c503","layout":{"x":14,"y":0,"width":9,"height":3},"query":{"kind":"inline","usedVariables":[],"text":"- right-click on one of the subscriptionIDs in the charts in Customer View page\n- select drillthrough -> Subscription View"},"visualOptions":{}},{"id":"5a4263d1-260d-4b5d-8a3b-ad410edac03a","title":"To select a feature:","visualType":"markdownCard","pageId":"abdd00b4-5e83-497d-a2c3-661d5d37f13c","layout":{"x":14,"y":0,"width":9,"height":3},"query":{"kind":"inline","usedVariables":[],"text":"- right-click on one of the feature names in the charts in Subscription View page\n- select drillthrough -> Feature View"},"visualOptions":{}},{"id":"0973ec15-1d39-417f-871c-b829026963bb","title":"Weekly Windows Pop Trend for agent versions older than 10_20_18053","visualType":"timechart","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":5,"width":24,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"let MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date > ago(124d)\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n| summarize Old_Agent_Pop = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by bin_at(Date, 7d, now())\n;\nMMA_BreakingAgent"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"58623ec8-7dc3-4ad5-aeed-dcb06ecf978f","title":"Monthly Windows Pop Trend for agent versions older than 10_20_18053","visualType":"timechart","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":12,"width":24,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"let MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date > ago(364d)\n//| where InternalOrExternal == \"External\"\n//| where isnotempty(SubscriptionId)\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n| summarize Old_Agent_Pop = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by bin_at(Date, 28d, now())\n| extend Old_Agent_Pop = round(Old_Agent_Pop/4.0,0)\n;\nMMA_BreakingAgent"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"68330017-dbb1-4e5b-b5e9-f89fdb0adfe8","title":"Total Machines using AMA ","visualType":"card","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":9,"y":0,"width":7,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"let AMApop =\ncluster('genevaagent.kusto.windows.net').database('AMA').HealthSummaryDaily \n| where StartTime > ago(60d)\n| where not(isnull(Ods) and isnull(Telegraf) and isnull(MetricsExtension) and isnull(Gig)) //Filter out no data, no metrics agents\n| summarize DailyCount = count() by StartTime\n| summarize MonthlyAvg = round(max(DailyCount),0)\n;\nAMApop\n"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"4059aa48-715c-4db1-a528-aee6bfa55de8","title":"Unique Customers using AMA","visualType":"card","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":16,"y":0,"width":8,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"let NewestAMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nunion cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot, \n      cluster('genevaagent.kusto.windows.net').database('BI').LnxAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestAMA\n| summarize UniqueCount = round(dcount(Customer),0)\n;\n"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light"}},{"id":"4368c2c4-0dba-432a-80d0-72f5994cbe7e","title":"New tile","visualType":"markdownCard","pageId":"0f11bccd-e020-49cf-988e-0af9d9077278","layout":{"x":0,"y":0,"width":9,"height":5},"query":{"kind":"inline","usedVariables":[],"text":"## AMA Migration Field Dashboard\n\n- Access to this dashboard is currently limited to [AMANews](https://idwebelements.microsoft.com/GroupManagement.aspx?Group=amanews&Operation=join)(click to join) group.  \n\n- For viewing per customer charts at the bottom of the dashboard, you must select a customer first by \"right click\" on customer name and selecting \"cross-filter\"\n"},"visualOptions":{}},{"id":"808491ce-7593-49d0-ba66-8563678c2085","title":"Total MMA population of agents older than 10_20_18053 with 22s excluded","visualType":"card","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":16,"y":0,"width":8,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations of older than 10_20_18053 with 22s excluded\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OldAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| where AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\",\"10.22.10056.0\",\"10.22.10058.0\",\"10.22.10061.0\",\"10.22.10070.0\")\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal,CSAM,Customer_TPID\n| summarize Total_Old_Agent_Population = sum(Population);\nMMA_OldAgent"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"8d3c3281-a1f9-42e8-81a8-afb8a7d6f723","title":"MMA pop of agents older than 10_20_18053","visualType":"card","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":6,"y":0,"width":10,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OldAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| where AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\")\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal,CSAM, Customer_TPID\n| summarize Total_Old_Agent_Population = sum(Population);\nMMA_OldAgent"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"a41b7066-b9f4-4fb7-9221-9be2c0624a8e","title":"Total MMA pop of all agents","visualType":"card","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":0,"width":6,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OldAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal,CSAM, Customer_TPID\n| summarize Total_Old_Agent_Population = sum(Population);\nMMA_OldAgent"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"d1d2c376-e4e7-4421-99c4-83746cbc384d","title":"Latest AMA agent pop estimation","visualType":"card","pageId":"c5d21b0d-c518-4c94-999c-daa022afb8c1","layout":{"x":0,"y":21,"width":12,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA/OMS customer, their agent pop, and CSAM\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinAMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet AMA_All_Agent =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxAMACustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinAMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == Newest\n| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal, CSAM\n| summarize Total_Population = sum(Population)\n;\nAMA_All_Agent"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"0db6f832-2017-41eb-b9ef-3fec0d284388","title":"Selected customer Breaking Version Populations","visualType":"bar","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":32,"width":12,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["BreakingCustomer"],"text":"let Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| extend Customer = iff(Customer == '', 'Unknown', Customer)\n| where ['BreakingCustomer'] == Customer or ['BreakingCustomer'] == \"ALL\"\n| project Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n| summarize Breaking_Agent = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by AgentVersion\n| project-reorder AgentVersion, Breaking_Agent\n| where Breaking_Agent > 0\n| sort by Breaking_Agent desc;\nMMA_BreakingAgent"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3f83b8af-45dd-4b9c-8c89-109d27ee53f0","title":"Selected customer Feature Populations","visualType":"bar","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":12,"y":32,"width":12,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["BreakingCustomer"],"text":"let NewestSol = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | top 1 by Date );\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerSolutionsWeeklySnapshot\n| where TblVer == 4\n| extend Customer = iff(Customer == '', 'Unknown', Customer)\n| where ['BreakingCustomer'] == Customer or ['BreakingCustomer'] == \"ALL\"\n| summarize SolutionPop = sum(Population) by GroupedSolution\n| sort by SolutionPop desc "},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"b918a1a9-0779-44ad-aff2-2661ba8684c2","title":"s500 MMA pop of all agents","visualType":"card","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":0,"y":0,"width":6,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OldAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal,CSAM, Customer_TPID\n;\nlet s500Customers =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Customer_Fortune500 == \"Fortune 500\"\n| distinct Customer\n;\ns500Customers\n| join kind=leftouter MMA_OldAgent on Customer\n| summarize Total_Agent_Population = sum(Population);"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"38e3feb3-a70b-41fb-9e3b-e4b477ae3e55","title":"s500 MMA pop of agents older than 10_20_18053","visualType":"card","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":6,"y":0,"width":10,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OldAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n;\nlet s500Customers =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Customer_Fortune500 == \"Fortune 500\"\n| distinct Customer\n;\ns500Customers\n| join kind=leftouter MMA_OldAgent on Customer\n| where AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\")\n| summarize Total_Agent_Population = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"d2b26bdb-620a-4676-b6d5-bf0135dd6eab","title":"s500 MMA population of agents older than 10_20_18053 with 22s excluded","visualType":"card","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":16,"y":0,"width":8,"height":5},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_OldAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n;\nlet s500Customers =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Customer_Fortune500 == \"Fortune 500\"\n| distinct Customer\n;\ns500Customers\n| join kind=leftouter MMA_OldAgent on Customer\n| where AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\",\"10.22.10056.0\",\"10.22.10058.0\",\"10.22.10061.0\",\"10.22.10070.0\")\n| summarize Total_Agent_Population = sum(Population)"},"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light"}},{"id":"07adef2b-826b-4b69-8729-d02ae27057f7","title":"Weekly Windows s500 Pop Trend for agent versions older than 10_20_18053","visualType":"timechart","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":0,"y":5,"width":24,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"let s500Customers =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Customer_Fortune500 == \"Fortune 500\"\n| distinct Customer\n;\nlet MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date > ago(124d)\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n;\ns500Customers\n| join kind=leftouter MMA_BreakingAgent on Customer\n| project-away Customer1\n| where isnotempty(Date)\n| summarize Old_Agent_Pop = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))//,\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by bin_at(Date, 7d, now())"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"449048e5-8ff6-45f8-975e-bbc4791bdd01","title":"Monthly Windows s500 Pop Trend for agent versions older than 10_20_18053","visualType":"timechart","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":0,"y":12,"width":24,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"let s500Customers =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Customer_Fortune500 == \"Fortune 500\"\n| distinct Customer\n;\nlet MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date > ago(364d)\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Date, Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n;\ns500Customers\n| join kind=leftouter MMA_BreakingAgent on Customer\n| project-away Customer1\n| where isnotempty(Date)\n| summarize Old_Agent_Pop = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))//,\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by bin_at(Date, 28d, now())\n| extend Old_Agent_Pop = round(Old_Agent_Pop/4.0,0)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3b7e6223-525c-44be-b385-aeec16618dd5","title":"MMA s500 Customers with agent populations that are older than 10_20_18053 with 22s included","visualType":"table","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":0,"y":19,"width":24,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//MMA Customers with agent populations that are older than 10_20_18053 with 22s included\nlet NewestAgent = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet NewestSol = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | top 1 by Date );\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 5\n    | top 1 by Date );\nlet MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == NewestAgent\n//| where InternalOrExternal == \"External\" and isnotempty(SubscriptionId)\n| project Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n| summarize Breaking_Agent = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\")),\n            New_Agent = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by Customer, Customer_TPID, CSAM\n| project-reorder Customer, Breaking_Agent, CSAM, Customer_TPID\n| sort by Breaking_Agent desc\n;\nlet SolutionsData =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerSolutionsWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestSol\n| summarize GroupedSolutions = make_set(GroupedSolution) by Customer\n;\nlet s500Customers =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 5\n| where Date == Newest\n| where Customer_Fortune500 == \"Fortune 500\"\n| distinct Customer\n;\ns500Customers\n| join kind = leftouter MMA_BreakingAgent on Customer\n| project-away Customer1\n| join kind=leftouter SolutionsData on Customer\n| project-away Customer1\n| extend Customer = iff(Customer == '', 'Unknown', Customer)\n| sort by Breaking_Agent desc\n| project-reorder Customer, Breaking_Agent, New_Agent, CSAM, Customer_TPID, GroupedSolutions\n| order by Breaking_Agent, New_Agent"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRulesDisabled":false,"crossFilterDisabled":false,"drillthroughDisabled":true,"colorRules":[],"pie__TopNSlices":null,"colorStyle":"light","crossFilter":[{"interaction":"column","property":"Customer","parameterId":"0abc1729-675e-4c00-a1d8-44ce79966451","disabled":false}],"drillthrough":[],"table__renderLinks":[]}},{"id":"d48bfa88-1a40-4a95-8a9f-e18ca98bd6de","title":"Selected customer Breaking Version Populations","visualType":"bar","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":0,"y":32,"width":12,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["BreakingCustomer"],"text":"let Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerAgentVerWeeklySnapshot\n    | where TblVer == 3\n    | project Date\n    | top 1 by Date );\nlet MMA_BreakingAgent =\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerAgentVerWeeklySnapshot\n| where TblVer == 3\n| where Date == Newest\n| extend Customer = iff(Customer == '', 'Unknown', Customer)\n| where ['BreakingCustomer'] == Customer or ['BreakingCustomer'] == \"ALL\"\n| project Customer, SubscriptionId, Population, InternalOrExternal,Customer_TPID, CSAM, AgentVersion\n| summarize Breaking_Agent = sumif(Population,AgentVersion !in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n            //New_Agent_Pop = sumif(Population,AgentVersion in~ (\"10.20.18067.0\", \"1.0.18067.0\", \"10.20.18064.0\", \"1.0.18064.0\", \"10.20.18062.0\", \"1.0.18062.0\", \"10.20.18053.0\", \"1.0.18053.0\",\"10.20.18057.0\"))\n    by AgentVersion\n| project-reorder AgentVersion, Breaking_Agent\n| where Breaking_Agent > 0\n| sort by Breaking_Agent desc;\nMMA_BreakingAgent"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"983c3f36-0a9c-4067-9511-c3f76308d782","title":"Selected customer Feature Populations","visualType":"bar","pageId":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","layout":{"x":12,"y":32,"width":12,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":["BreakingCustomer"],"text":"let NewestSol = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerSolutionsWeeklySnapshot\n    | where TblVer == 4\n    | top 1 by Date );\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerSolutionsWeeklySnapshot\n| where TblVer == 4\n| extend Customer = iff(Customer == '', 'Unknown', Customer)\n| where ['BreakingCustomer'] == Customer or ['BreakingCustomer'] == \"ALL\"\n| summarize SolutionPop = sum(Population) by GroupedSolution\n| sort by SolutionPop desc "},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"807b619f-c170-41b1-b641-b8d97f6901f9","title":"Feature Sets of Agents w/ NO subscriptionId that are older than 10_20_18053 with 22s included","visualType":"bar","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":42,"width":24,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Agent Data with NO subscriptionId that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMABreakingAgentIdsNOSubWeeklySnap\n    | where TblVer == 1\n    | top 1 by Date );\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMABreakingAgentIdsNOSubWeeklySnap\n| where TblVer == 1\n| where Date == Newest\n| project AgentId, Population, GroupedSolutions, AgentVersions, OSFullVers, Sources, Regions, AvgHeartbeatCount, AvgTotalUploadKB\n| summarize Pop = sum(Population) by tostring(GroupedSolutions)\n| order by Pop\n| top 12 by Pop"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"0abc1729-675e-4c00-a1d8-44ce79966451","disabled":false}],"drillthrough":[]}},{"id":"5d265080-8623-43ee-9c1d-d831c68a5a52","title":"Agent Versions of Agents w/ NO subscriptionId that are older than 10_20_18053 with 22s included","visualType":"bar","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":52,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Agent Data with NO subscriptionId that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMABreakingAgentIdsNOSubWeeklySnap\n    | where TblVer == 1\n    | top 1 by Date );\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMABreakingAgentIdsNOSubWeeklySnap\n| where TblVer == 1\n| where Date == Newest\n| project AgentId, Population, GroupedSolutions, AgentVersions, OSFullVers, Sources, Regions, AvgHeartbeatCount, AvgTotalUploadKB\n| summarize Pop = sum(Population) by tostring(AgentVersions)\n| order by Pop\n| top 7 by Pop"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"0abc1729-675e-4c00-a1d8-44ce79966451","disabled":false}],"drillthrough":[]}},{"id":"e69c7ed6-74e7-48c2-ab8b-b5151cf6f33b","title":"New tile","visualType":"markdownCard","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":3,"y":40,"width":19,"height":2},"query":{"kind":"inline","usedVariables":[],"text":"## Agent Info for ones that have no SubscriptionId & are Breaking Change versions"},"visualOptions":{}},{"id":"d038592d-f0c1-48fa-84fe-1bad52e10298","title":"Data for Agents w/ NO subscriptionId that are older than 10_20_18053 with 22s included","visualType":"table","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":70,"width":24,"height":13},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Agent Data with NO subscriptionId that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMABreakingAgentIdsNOSubWeeklySnap\n    | where TblVer == 1\n    | top 1 by Date );\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMABreakingAgentIdsNOSubWeeklySnap\n| where TblVer == 1\n| where Date == Newest\n| project AgentId, Population, GroupedSolutions, AgentVersions, OSFullVers, Sources, Regions, AvgHeartbeatCount, AvgTotalUploadKB"},"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"0abc1729-675e-4c00-a1d8-44ce79966451","disabled":false}],"drillthrough":[],"table__renderLinks":[]}},{"id":"2fea8efd-d9e2-4a99-8096-84dac4cd7e9b","title":"OSVersions of Agents w/ NO subscriptionId that are older than 10_20_18053 with 22s included","visualType":"bar","pageId":"677abef2-115c-4263-b389-ab651f87534a","layout":{"x":0,"y":61,"width":24,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//Agent Data with NO subscriptionId that are older than 10_20_18053 with 22s included\nlet Newest = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMABreakingAgentIdsNOSubWeeklySnap\n    | where TblVer == 1\n    | top 1 by Date );\ncluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMABreakingAgentIdsNOSubWeeklySnap\n| where TblVer == 1\n| where Date == Newest\n| project AgentId, Population, GroupedSolutions, AgentVersions, OSFullVers, Sources, Regions, AvgHeartbeatCount, AvgTotalUploadKB\n| summarize Pop = sum(Population) by tostring(OSFullVers)\n| order by Pop\n| top 10 by Pop"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"Customer","parameterId":"0abc1729-675e-4c00-a1d8-44ce79966451","disabled":false}],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"08864796-4b5e-423d-bbb8-c356a44daa75","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"selection","pageIds":[]}},{"kind":"string","selectionType":"freetext","id":"4f7a8544-fd41-4ec2-bf59-1149076ce777","displayName":"Customer(SubscriptionId)","variableName":"CustomerSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["3bade44b-2e1b-4b7b-9970-4365c4d6c503"]}},{"kind":"string","selectionType":"freetext","id":"cbb1a6cd-a6ce-44f1-909e-23dc1f7e6dd8","displayName":"Solution","variableName":"SolutionSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["abdd00b4-5e83-497d-a2c3-661d5d37f13c"]}},{"kind":"string","selectionType":"freetext","id":"900f1a93-cd36-46c2-97a9-17e7c20487ef","displayName":"CustomerName","variableName":"CustomerNameSelect","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049"]}},{"kind":"string","selectionType":"freetext","id":"5dcd507b-76b6-418b-8ff2-de7827515e44","displayName":"CustomerName_Field","variableName":"CustomerNameSelect_Field","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["0f11bccd-e020-49cf-988e-0af9d9077278"]}},{"kind":"string","selectionType":"freetext","id":"cb1d5fad-beba-4946-8c8b-e1bb3934dc9d","displayName":"Solution_PartnerTeam","variableName":"SolutionSelect_Partner","defaultValue":{"kind":"value","value":"None"},"showOnPages":{"kind":"selection","pageIds":["f319b8c3-3325-476b-9db8-af3b4fe1f993"]}},{"kind":"string","id":"ec22f0ef-c259-47f4-8d95-f323f9051d5a","displayName":"Sales_Segment","variableName":"Sales_Segment_Field","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"1744db72-6d19-46bb-ae67-eb77c91db237"},"usedVariables":[],"text":"//----------------------------------------------------------------------------\nlet NewestMMA = toscalar(cluster('genevaagent.kusto.windows.net').database('BI').WinMMACustomerWeeklySnapshot\n    | where TblVer == 4\n    | project Date\n    | top 1 by Date );\nlet MMA_cust_pop =\nunion cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").LnxOMSCustomerWeeklySnapshot, \n      cluster(\"genevaagent.kusto.windows.net\").database(\"BI\").WinMMACustomerWeeklySnapshot\n| where TblVer == 4\n| where Date == NewestMMA\n| distinct SalesSegment\n;\nMMA_cust_pop\n| sort by SalesSegment asc "},"columns":{"value":"SalesSegment"}},"showOnPages":{"kind":"selection","pageIds":["0f11bccd-e020-49cf-988e-0af9d9077278"]}},{"kind":"string","selectionType":"freetext","id":"0abc1729-675e-4c00-a1d8-44ce79966451","displayName":"BreakingCustomer","variableName":"BreakingCustomer","defaultValue":{"kind":"value","value":"ALL"},"showOnPages":{"kind":"selection","pageIds":["677abef2-115c-4263-b389-ab651f87534a","5cb8f79b-12db-40ac-ba8d-72d35b797c4e","0f902a44-d89e-45aa-8ce1-570b7c7716fe"]}}],"dataSources":[{"id":"1744db72-6d19-46bb-ae67-eb77c91db237","name":"GenevaAgentBI","clusterUri":"https://genevaagent.kusto.windows.net/","database":"BI","kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"Field/CSS Dashboard","id":"0f11bccd-e020-49cf-988e-0af9d9077278"},{"name":"OMS->AMA Migration","id":"c5d21b0d-c518-4c94-999c-daa022afb8c1"},{"id":"9a8e7d67-1f65-42c5-a6bc-3d1ec53ff049","name":">> Customer View"},{"name":">> Subscription View","id":"3bade44b-2e1b-4b7b-9970-4365c4d6c503"},{"name":">> Feature View","id":"abdd00b4-5e83-497d-a2c3-661d5d37f13c"},{"name":"Breaking Change for MMA","id":"677abef2-115c-4263-b389-ab651f87534a"},{"id":"0f902a44-d89e-45aa-8ce1-570b7c7716fe","name":"s500 breaking migration"}]}